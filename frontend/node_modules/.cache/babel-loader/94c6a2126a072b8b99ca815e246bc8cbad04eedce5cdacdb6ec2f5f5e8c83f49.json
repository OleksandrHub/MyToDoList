{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"task-component\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"error\"\n};\nconst _hoisted_4 = {\n  key: 2\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"task\"\n};\nconst _hoisted_6 = [\"checked\", \"onChange\"];\nconst _hoisted_7 = {\n  class: \"buttons\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  key: 3\n};\nconst _hoisted_11 = {\n  key: 4\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_EditTask = _resolveComponent(\"EditTask\");\n  const _component_AddTask = _resolveComponent(\"AddTask\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$props.user ? (_openBlock(), _createElementBlock(\"p\", _hoisted_2, \"Привіт, \" + _toDisplayString($props.user.name) + \"! Ось твій список справ ✨\", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('logout'))\n  }, \"Вийти\"), _createElementVNode(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"search\"\n  }, \"Знайти задачу \", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"search\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.searchQuery = $event),\n    placeholder: \"Введіть назву або опис...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchQuery]])]), $data.error !== '' ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"nav\", null, [_createElementVNode(\"span\", {\n    class: \"allocated\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.setFilter('all'))\n  }, \"Усі завдання |\"), _createElementVNode(\"span\", {\n    class: \"allocated\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.setFilter('completed'))\n  }, \"Виконані завдання |\"), _createElementVNode(\"span\", {\n    class: \"allocated\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.setFilter('incomplete'))\n  }, \"Не виконані завдання\")]), $options.filteredTasks.length > 0 ? (_openBlock(), _createElementBlock(\"section\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredTasks, task => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: task.id\n    }, [task.id !== $data.editbutton_id ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", null, [_createElementVNode(\"h3\", {\n      class: _normalizeClass(task.completed ? 'completed' : '')\n    }, _toDisplayString(task.title), 3 /* TEXT, CLASS */), _createElementVNode(\"p\", null, _toDisplayString(task.description), 1 /* TEXT */), _createElementVNode(\"input\", {\n      type: \"checkbox\",\n      checked: task.completed,\n      onChange: $event => $options.completedTask(task, !task.completed)\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_6), _createElementVNode(\"p\", {\n      class: _normalizeClass(task.date < $options.todayDate ? 'redDate' : '')\n    }, \"Дата виконання: \" + _toDisplayString(task.date), 3 /* TEXT, CLASS */)]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n      onClick: $event => $options.deleteTask(task.id)\n    }, \"Видалити\", 8 /* PROPS */, _hoisted_8), _createElementVNode(\"button\", {\n      onClick: $event => $data.editbutton_id = task.id\n    }, \"Редагувати\", 8 /* PROPS */, _hoisted_9)])])) : _createCommentVNode(\"v-if\", true), task.id === $data.editbutton_id ? (_openBlock(), _createBlock(_component_EditTask, {\n      key: 1,\n      task: task,\n      onFetchTasks: $options.fetchTasks,\n      onEditbutton: _cache[5] || (_cache[5] = $event => $data.editbutton_id = $event),\n      onHandleAuthError: _cache[6] || (_cache[6] = $event => this.$emit('handleAuthError')),\n      onTodayDate: $options.todayDate\n    }, null, 8 /* PROPS */, [\"task\", \"onFetchTasks\", \"onTodayDate\"])) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), $data.tasks.length > 0 && $options.filteredTasks.length === 0 && $data.searchQuery != '' ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, \"Завдання не знайдено за вашим запитом та фільтром.\")) : _createCommentVNode(\"v-if\", true), $data.tasks.length === 0 && $data.searchQuery === '' ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, \"У вас ще немає задач. Додайте першу!\")) : _createCommentVNode(\"v-if\", true), !$data.addbutton ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 5,\n    onClick: _cache[7] || (_cache[7] = $event => $data.addbutton = !$data.addbutton)\n  }, \"Додати задачу\")) : _createCommentVNode(\"v-if\", true), $data.addbutton ? (_openBlock(), _createBlock(_component_AddTask, {\n    key: 6,\n    user_id: $props.user.id,\n    onFetchTasks: $options.fetchTasks,\n    onAddbutton: _cache[8] || (_cache[8] = $event => $data.addbutton = $event),\n    onHandleAuthError: _cache[9] || (_cache[9] = $event => this.$emit('handleAuthError')),\n    onTodayDate: $options.todayDate\n  }, null, 8 /* PROPS */, [\"user_id\", \"onFetchTasks\", \"onTodayDate\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$props","user","_hoisted_2","_toDisplayString","name","_createElementVNode","onClick","_cache","$event","_ctx","$emit","for","type","id","$data","searchQuery","placeholder","error","_hoisted_3","$options","setFilter","filteredTasks","length","_hoisted_4","_Fragment","_renderList","task","key","editbutton_id","_hoisted_5","_normalizeClass","completed","title","description","checked","onChange","completedTask","date","todayDate","_hoisted_7","deleteTask","_hoisted_8","_hoisted_9","_createBlock","_component_EditTask","onFetchTasks","fetchTasks","onEditbutton","onHandleAuthError","onTodayDate","tasks","_hoisted_10","_hoisted_11","addbutton","_component_AddTask","user_id","onAddbutton"],"sources":["/home/homesasha/Python_Fullstack/SashaTodoList/public/src/components/TaskComponent.vue"],"sourcesContent":["<template>\n    <div class=\"task-component\">\n        <p v-if=\"user\">Привіт, {{ user.name }}! Ось твій список справ ✨</p>\n        <button @click=\"$emit('logout')\">Вийти</button>\n        <div>\n            <label for=\"search\">Знайти задачу </label>\n            <input type=\"text\" id=\"search\" v-model=\"searchQuery\" placeholder=\"Введіть назву або опис...\" />\n        </div>\n        <p v-if=\"error !== ''\" class=\"error\">{{error}}</p>\n        <nav>\n            <span class=\"allocated\" @click=\"setFilter('all')\">Усі завдання |</span>\n            <span class=\"allocated\" @click=\"setFilter('completed')\">Виконані завдання |</span>\n            <span class=\"allocated\" @click=\"setFilter('incomplete')\">Не виконані завдання</span>\n        </nav>\n        <section v-if=\"filteredTasks.length > 0\">\n            <div v-for=\"task in filteredTasks\" :key=\"task.id\">\n                <div v-if=\"task.id !== editbutton_id\" class=\"task\">\n                    <div>\n                        <h3 :class=\"task.completed ? 'completed' : ''\">{{ task.title }}</h3>\n                        <p>{{ task.description }}</p>\n                        <input type=\"checkbox\" :checked=\"task.completed\" @change=\"completedTask(task, !task.completed)\" />\n                        <p :class=\"task.date < todayDate ? 'redDate' : ''\">Дата виконання: {{ task.date }}</p>\n                    </div>\n                    <div class=\"buttons\">\n                        <button @click=\"deleteTask(task.id)\">Видалити</button>\n                        <button @click=\"editbutton_id = task.id\">Редагувати</button>\n                    </div>\n                </div>\n                <EditTask v-if=\"task.id === editbutton_id\" :task=\"task\" @fetchTasks=\"fetchTasks\" @editbutton=\"editbutton_id = $event\" @handleAuthError=\"this.$emit('handleAuthError')\" @todayDate=\"todayDate\"/>\n            </div>\n        </section>\n        <p v-if=\"tasks.length > 0 && filteredTasks.length === 0 && searchQuery != ''\">Завдання не знайдено за вашим запитом та фільтром.</p>\n        <p v-if=\"tasks.length === 0 && searchQuery === ''\">У вас ще немає задач. Додайте першу!</p>\n        <button v-if=\"!addbutton\" @click=\"addbutton = !addbutton\">Додати задачу</button>\n        <AddTask v-if=\"addbutton\" :user_id=\"user.id\" @fetchTasks=\"fetchTasks\" @addbutton=\"addbutton = $event\" @handleAuthError=\"this.$emit('handleAuthError')\" @todayDate=\"todayDate\" />\n\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport AddTask from './AddTask.vue';\nimport EditTask from './EditTask.vue';\n\nexport default {\n    name: 'TaskComponent',\n    components: {\n        AddTask,\n        EditTask\n    },\n    props: {\n        user: Object\n    },\n    data() {\n        return {\n            tasks: [],\n            error: '',\n            addbutton: false,\n            editbutton_id: 0,\n            searchQuery: '',\n            filterStatus: 'all' // 'all', 'completed', 'incomplete'\n        }\n    },\n    computed: {\n        filteredTasks() {\n            let tasksToFilter = this.tasks;\n\n            if (this.filterStatus === 'completed') {\n                tasksToFilter = this.tasks.filter(task => task.completed);\n            } else if (this.filterStatus === 'incomplete') {\n                tasksToFilter = this.tasks.filter(task => !task.completed);\n            }\n\n            if (!this.searchQuery) {\n                return tasksToFilter;\n            }\n\n            const lowerCaseQuery = this.searchQuery.toLowerCase();\n            return tasksToFilter.filter(task =>\n                task.title.toLowerCase().includes(lowerCaseQuery) ||\n                task.description.toLowerCase().includes(lowerCaseQuery)\n            );\n        },\n        todayDate() {\n            const today = new Date();\n            const yyyy = today.getFullYear();\n            const mm = String(today.getMonth() + 1).padStart(2, '0');\n            const dd = String(today.getDate()).padStart(2, '0');\n            return `${yyyy}-${mm}-${dd}`;\n        }\n    },\n    methods: {\n        async fetchTasks() {\n            this.error = '';\n            try {\n                const response = await axios.get(`http://127.0.0.1:8000/tasks/${this.user.id}`);\n                this.tasks = response.data;\n            } catch (err) {\n                this.$emit('handleAuthError', err);\n            }\n        },\n        async deleteTask(id) {\n            try {\n                await axios.delete(`http://127.0.0.1:8000/tasks/${id}`);\n                this.fetchTasks();\n            } catch (err) {\n                this.$emit('handleAuthError', err);\n            }\n        },\n        async completedTask(task, completed) {\n            try {\n                await axios.put(`http://127.0.0.1:8000/tasks/${task.id}/`, {\n                    title: task.title,\n                    description: task.description,\n                    completed: completed,\n                    date: task.date,\n                    user_id: task.user_id\n                });\n                this.fetchTasks();\n            } catch (err) {\n                if (err.response) {\n                    if (err.response.status === 400 && err.response.data && err.response.data.detail === \"Incorrect username\") {\n                        this.error = 'Користувача з таким email не знайдено';\n                    } else {\n                        this.error = `Помилка: ${err.response.data.detail || 'Не вдалося увійти. Спробуйте пізніше.'}`;\n                    }\n                } else if (err.request) {\n                    this.error = 'Не вдалося підключитися до сервера. Перевірте ваше інтернет-з\\'єднання.';\n                } else {\n                    this.error = 'Сталася помилка під час відправки запиту.';\n                }\n            }\n        },\n        setFilter(status) {\n            this.filterStatus = status;\n        }\n    },\n    watch: {\n        user: {\n            handler(newUser) {\n                if (newUser && newUser.id) {\n                    this.fetchTasks();\n                } else {\n                    this.tasks = [];\n                    this.error = '';\n                }\n            },\n            immediate: true\n        }\n    }\n}\n</script>\n\n<style scoped>\n.task-component{\n    color: #fff;\n    padding: 30px 10px;\n    border-radius: 10px;\n    margin: auto;\n    width: clamp(100px, 80%, 700px);\n    text-align: center;\n}\n\nsection > div{\n    background-color: #111;\n    border-radius: 10px;\n    margin:10px 0;\n    padding: 10px;\n}\nsection div input[type=\"checkbox\"]{\n    accent-color: #6e2d7d;\n}\n.completed{\n    text-decoration: line-through;\n}\n.task{\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    flex-wrap: wrap;\n    text-align: left;\n}\n.task > div{\n    width: 50%;\n}\n.buttons{\n    text-align: right;\n}\n.redDate{\n    color: rgb(255, 77, 77);\n}\nnav{\n    margin:20px 0;\n    display: flex;\n    flex-wrap: wrap;\n}\n.allocated:hover{\n    color: #a7a7a7;\n    cursor: pointer;\n    text-decoration: underline;\n}\n\n@media screen and (max-width: 768px) {\n    .task > div{\n        width: 100%;\n    }\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}